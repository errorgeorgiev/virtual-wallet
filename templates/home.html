<!-- templates/home.html -->
{% if user.is_authenticated %}
    You are logged in as : {{ user.email }}
<html>
    <p><a href="{% url 'account_logout' %}">Log Out</a></p>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
            ntegrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        
        <style>
            body {
                background-color: #212529;
                color: white;
            }

            * {
                color: white;
            }

            img {
                height: 5rem;
                width: 5rem;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Топ 20 валути според пазарната им капитализация:</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <form class="d-flex ms-auto">
                        <input class="form-control me-2" type="search" placeholder="Търсене..." aria-label="Search" id="myInput">
                        
                    </form>
                </div>
            </div>
        </nav>
        <section>
            <div class="container py-5">
                <div class="table-responsive text-white">
                    <table class="table table-striped text-center table-hover table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">Валута:</th>
                                <th scope="col">Символ:</th>
                                <th scope="col">Изображение:</th>
                                <th scope="col">Цена(USD):</th>
                                <th scope="col">Пазарна капитализация(USD):</th>
                                <th scope="col">Промяна(24 часа):</th>
                                <th scope="col">Търгувай:</th>
                            </tr>
                        </thead>
                        <tbody id="myTable">
                            {% for item in api_data %}
                                <tr>
                                    <td>{{ item.name }}</td>
                                    <td>{{ item.symbol }}</td>
                                    <td><img src="{{ item.image }}"></td>
                                    <td>{{ item.current_price }}</td>
                                    <td>{{ item.market_cap }}</td>
                                    <td>{{ item.price_change_percentage_24h }}%</td>
                                    <td><button style="background-color: green;">Buy</button><button style="background-color: red;">Sell</button></td>
                                </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        <footer class="fixed-bottom py-2" style="background-color: darkslategrey !important;">
            <p class="text-white text-center mb-0">Всички права запазени 2023</p>
        </footer>




        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
            crossorigin="anonymous"></script>
        <script>
            $(document).ready(function () {
                $("#myInput").on("keyup", function () {
                    var value = $(this).val().toLowerCase();
                    $("#myTable tr").filter(function () {
                        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                    });
                });
            });
        </script>
    </body>
</html>
{% else %}
  <p>Log in to be able to trade</p>
  <a href="{% url 'account_login' %}">Log In</a> |
  <a href="{% url 'account_signup' %}">Sign Up</a>
  <html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet"
            ntegrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        
        <style>
            body {
                background-color: #212529;
                color: white;
            }

            * {
                color: white;
            }

            img {
                height: 5rem;
                width: 5rem;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Trending Cryptocurrencies</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <form class="d-flex ms-auto">
                        <input class="form-control me-2" type="search" placeholder="Търсене..." aria-label="Search" id="myInput">
                        
                    </form>
                </div>
            </div>
        </nav>
        <section>
            <div class="container py-5">
                <div class="table-responsive text-white">
                    <table class="table table-striped text-center table-hover table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">Валута:</th>
                                <th scope="col">Символ:</th>
                                <th scope="col">Изображение:</th>
                                <th scope="col">Цена(USD):</th>
                                <th scope="col">Пазарна капитализация(USD):</th>
                                <th scope="col">Промяна(24 часа):</th>
                            </tr>
                        </thead>
                        <tbody id="myTable">
                            {% for item in api_data %}
                                <tr>
                                    <td>{{ item.name }}</td>
                                    <td>{{ item.symbol }}</td>
                                    <td><img src="{{ item.image }}"></td>
                                    <td>{{ item.current_price }}</td>
                                    <td>{{ item.market_cap }}</td>
                                    <td>{{ item.price_change_percentage_24h }}%</td>
                                </tr>
                            {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        <footer class="fixed-bottom py-2" style="background-color: darkslategrey !important;">
            <p class="text-white text-center mb-0">Всички права запазени 2023</p>
        </footer>




        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
            crossorigin="anonymous"></script>
        <script>
            $(document).ready(function () {
                $("#myInput").on("keyup", function () {
                    var value = $(this).val().toLowerCase();
                    $("#myTable tr").filter(function () {
                        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                    });
                });
            });
        </script>
    </body>
</html>
{% endif %}